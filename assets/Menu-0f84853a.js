import{a as I}from"./apiMapper-1d85f994.js";import{_ as F,h as T,r as x,o as h,k as u,a as b,c as V,l as e,w as a,f,b as r,t as B,n as N,g as S,s as E,v as q,E as y,p as z,d as A}from"./index-acda5581.js";const L={class:""},O={class:"sys-form-actions"},H={__name:"MenuForm",props:["menuData"],emits:["saveMenu","onClose"],setup(c,{emit:p}){const i=c,l=T({code:"",name:"",type:1,imageUrl:"",isResourceMenu:!0,webUrl:"",remark:"",readOnly:!1,parentId:"",orderId:""}),m=x(),M={name:[{required:!0,message:"资源名称不能为空",trigger:"blur"}],code:[{required:!0,message:"资源编码不能为空",trigger:"blur"}]};h(()=>{i.menuData&&w()});const w=()=>{for(const _ in l)l[_]=i.menuData[_];l.id=i.menuData.id},k=()=>{m.value.validate(_=>{_&&p("saveMenu",l)})},C=()=>{p("onClose")};return(_,o)=>{const n=u("el-input"),s=u("el-form-item"),v=u("el-radio"),d=u("el-radio-group"),U=u("el-switch"),D=u("el-form"),g=u("el-button");return b(),V("main",L,[e(D,{inline:!0,model:l,"label-width":"150px",rules:M,ref_key:"menuFormRef",ref:m},{default:a(()=>[e(s,{label:"资源名称",prop:"name"},{default:a(()=>[e(n,{modelValue:l.name,"onUpdate:modelValue":o[0]||(o[0]=t=>l.name=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"资源编码",prop:"code"},{default:a(()=>[e(n,{modelValue:l.code,"onUpdate:modelValue":o[1]||(o[1]=t=>l.code=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"资源图标"},{default:a(()=>[e(n,{modelValue:l.imageUrl,"onUpdate:modelValue":o[2]||(o[2]=t=>l.imageUrl=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"路由"},{default:a(()=>[e(n,{modelValue:l.webUrl,"onUpdate:modelValue":o[3]||(o[3]=t=>l.webUrl=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"排序号"},{default:a(()=>[e(n,{modelValue:l.orderId,"onUpdate:modelValue":o[4]||(o[4]=t=>l.orderId=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"备注"},{default:a(()=>[e(n,{modelValue:l.remark,"onUpdate:modelValue":o[5]||(o[5]=t=>l.remark=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"资源类型"},{default:a(()=>[e(d,{modelValue:l.type,"onUpdate:modelValue":o[6]||(o[6]=t=>l.type=t)},{default:a(()=>[e(v,{label:1},{default:a(()=>[f("菜单")]),_:1}),e(v,{label:2},{default:a(()=>[f("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"可见资源"},{default:a(()=>[e(U,{modelValue:l.isResourceMenu,"onUpdate:modelValue":o[7]||(o[7]=t=>l.isResourceMenu=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),r("div",O,[e(g,{type:"primary",onClick:k},{default:a(()=>[f("确认")]),_:1}),e(g,{type:"info",onClick:C},{default:a(()=>[f("取消")]),_:1})])])}}},W=F(H,[["__scopeId","data-v-85a20537"]]);const R=c=>(z("data-v-f993599c"),c=c(),A(),c),j={class:"sys-page-table-main"},G=R(()=>r("div",{class:"action-left"},null,-1)),J={class:"colunm-item-action"},K=["onClick"],P=["onClick"],Q=R(()=>r("div",{class:"action-button btn-danger"},"删除",-1)),X={__name:"MenuTable",setup(c){const p=x([]);let i=null;const l=x(!1);h(()=>{});const m=async()=>{const o={isAuth:!1,isResourceMenu:"",menuId:"",parentId:"",roleHasAuth:!1,roleId:"",type:0},{result:n}=await I.menuModule.getMenuList(o);p.value=n};m();const M=()=>{i=null,l.value=!0},w=o=>{i=o,l.value=!0},k=o=>{i={parentId:o.id,id:""},l.value=!0},C=async o=>{const{code:n,message:s}=await I.menuModule.saveMenu(o);n===200?(y.success("保存成功"),m(),l.value=!1):y.error(s)},_=async o=>{const{success:n,message:s}=await I.menuModule.deleteMenu(o);n?(y.success("删除成功"),m()):y.error(s)};return(o,n)=>{const s=u("el-divider"),v=u("el-empty"),d=u("el-table-column"),U=u("el-popconfirm"),D=u("el-table"),g=u("el-dialog");return b(),V("main",j,[r("div",{class:"sys-table-action"},[G,r("div",{class:"action-right"},[r("div",{class:"action-button",onClick:m},"刷新"),r("div",{class:"action-button",onClick:M},"添加一级资源")])]),e(s,{"content-position":"left"},{default:a(()=>[f("数据列表")]),_:1}),e(D,{data:p.value,border:"","header-cell-style":{background:"rgba(24, 144, 255, .15)",color:"#333333",borderColor:"#D9D9D9",fontWeight:400},"tree-props":{children:"child"},"row-key":"id","default-expand-all":""},{empty:a(()=>[e(v,{"image-size":100,description:"暂无数据"})]),default:a(()=>[e(d,{prop:"name",label:"资源名称"}),e(d,{prop:"orderId",label:"排序号",align:"center"}),e(d,{prop:"code",label:"资源编码",align:"center"}),e(d,{prop:"webUrl",label:"路由",align:"center"}),e(d,{prop:"type",label:"资源类型",align:"center"},{default:a(t=>[r("span",null,B(t.row.type===1?"菜单":"按钮"),1)]),_:1}),e(d,{prop:"imageUrl",label:"图标",align:"center"},{default:a(t=>[r("i",{class:N(["iconfont",t.row.imageUrl])},null,2)]),_:1}),e(d,{prop:"createTime",label:"创建时间",align:"center"}),e(d,{prop:"Status",label:"操作",width:"150",align:"center"},{default:a(t=>[r("div",J,[r("div",{class:"action-button",onClick:$=>w(t.row)},"编辑",8,K),t.row.type===1?(b(),V("div",{key:0,class:"action-button",onClick:$=>k(t.row)},"添加下级",8,P)):S("",!0),e(U,{title:"确认删除?",onConfirm:$=>_(t.row)},{reference:a(()=>[Q]),_:2},1032,["onConfirm"])])]),_:1})]),_:1},8,["data","header-cell-style"]),e(g,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=t=>l.value=t),title:"编辑资源",width:"40%",draggable:""},{default:a(()=>[l.value?(b(),E(W,{key:0,menuData:q(i),onSaveMenu:C,onOnClose:n[0]||(n[0]=t=>l.value=!1)},null,8,["menuData"])):S("",!0)]),_:1},8,["modelValue"])])}}},Y=F(X,[["__scopeId","data-v-f993599c"]]),Z={class:""},oe={__name:"Menu",setup(c){return h(()=>{}),(p,i)=>(b(),V("main",Z,[e(Y)]))}};export{oe as default};
